# 可移动摄像头 - 最终方案总结

## 核心创新点

可移动摄像头是智慧管家系统的核心创新功能之一,通过智能轨道系统实现全屋监控覆盖,与传统固定摄像头相比提供更灵活的智能家居体验。

## 最终方案:滚珠丝杠+齿轮齿条系统

### 方案优势对比

| 特性 | 皮带方案(已淘汰) | 滚珠丝杠方案(已采用) |
|------|----------------|-------------------|
| 噪音水平 | 40-50dB | 25-35dB |
| 运动精度 | ±2mm | ±0.1mm |
| 美观性 | 皮带外露 | 全部隐藏 |
| 维护需求 | 需定期张紧 | 免维护 |
| 适用场景 | 实验室 | 居家/生产 |

### 硬件组成

#### 1. 横向运动系统(左右移动)

**核心组件:**
- NEMA17步进电机 (42步距角)
- TMC2209静音驱动器
- 1605滚珠丝杠(16mm直径,5mm导程)
- 直线导轨支撑系统
- 2米有效行程

**技术参数:**
- 噪音: 25-35dB(TMC2209静音驱动)
- 精度: ±0.1mm
- 速度: 0-50mm/s可调
- 推力: 最大50N

#### 2. 垂直运动系统(上下移动)

**核心组件:**
- SG90微型舵机
- 0-180度转动范围
- 支持PWM控制

#### 3. 摄像头模块

**核心组件:**
- ESP32-S3主控芯片
- OV2640 200万像素摄像头
- WiFi + MQTT通信
- 内置图像处理能力

#### 4. 供电系统

- 12V直流电源
- 步进电机独立供电
- ESP32稳压模块

### 成本预算

| 组件 | 数量 | 单价 | 小计 |
|------|------|------|------|
| NEMA17步进电机 | 1 | ¥45 | ¥45 |
| TMC2209驱动器 | 1 | ¥35 | ¥35 |
| 1605滚珠丝杠(2m) | 1 | ¥80 | ¥80 |
| 直线导轨 | 1套 | ¥40 | ¥40 |
| SG90舵机 | 1 | ¥8 | ¥8 |
| ESP32-S3开发板 | 1 | ¥35 | ¥35 |
| OV2640摄像头 | 1 | ¥25 | ¥25 |
| 12V电源 | 1 | ¥12 | ¥12 |
| **总计** | - | - | **¥280** |

### 3D打印外壳

所有机械结构完全隐藏在白色3D打印外壳中:

1. **摄像头外壳** (camera_housing.scad)
   - 60x60x40mm
   - 白色哑光材质
   - 散热孔设计

2. **齿条盖板** (rack_cover.scad)
   - 2000x60x20mm
   - 完全覆盖机械结构
   - 与天花板齐平

3. **电机 housing** (motor_housing.scad)
   - 80x80x50mm
   - 隐藏电机和驱动器
   - 散热设计

### 安装方式

- 天花板嵌入式安装
- 所有机械结构隐藏在天花板内部
- 外观仅可见白色轨道条
- 适用于住宅/办公环境

### 软件架构

#### 通信协议

```
智慧管家 ←MQTT→ ESP32控制器 ←GPIO→ 步进电机/舵机
                      ↓
                   OV2640摄像头
```

#### MQTT Topic

| Topic | 方向 | 说明 |
|-------|------|------|
| camera/position | 发布 | 当前摄像头位置 |
| camera/image | 发布 | 实时图像 |
| camera/command | 订阅 | 移动指令 |

#### 控制指令

```json
{
  "command": "move_to",
  "x": 500,
  "y": 90,
  "speed": 30
}
```

### 技术创新点

1. **静音设计**: TMC2209驱动器实现25-35dB超静音运行
2. **高精度**: 滚珠丝杠实现±0.1mm定位精度
3. **美观设计**: 全隐藏机械结构,白色外观与家居融合
4. **低成本**: 总成本控制在¥280以内
5. **生产就绪**: 2米行程适合实际家居环境

### 应用场景

1. **全屋监控**: 2米行程覆盖4-6米空间
2. **智能跟随**: 自动跟踪家庭成员
3. **异常检测**: 移动巡查全屋状况
4. **远程看护**: 子女远程照看老人
5. **宠物监控**: 实时追踪宠物活动

### 与智慧管家集成

可移动摄像头作为智慧管家的核心硬件设备,通过MQTT协议与Butler系统无缝集成:

- **事件驱动**: 摄像头移动、图像捕获自动触发事件
- **LLM控制**: 通过Brain API自然语言控制摄像头位置
- **规则联动**: 检测到异常自动移动到指定位置
- **历史记录**: 所有位置和图像记录存入SQLite

### 下一步实施计划

1. 硬件采购和3D打印
2. ESP32固件开发和调试
3. 与Butler系统MQTT集成
4. Web UI控制界面开发
5. 语音控制功能实现
