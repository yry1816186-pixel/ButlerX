<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>智慧管家 - 设备控制中心</title>
  <link rel="stylesheet" href="assets/style.css">
</head>
<body>
  <div class="container">
    <header>
      <div class="logo">DEVICE CONTROL</div>
      <nav>
        <a href="dashboard.html">AI核心</a>
        <a href="controls.html" class="active">设备控制</a>
        <a href="settings.html">设置</a>
        <a href="logs.html">日志</a>
        <a href="index.html">首页</a>
      </nav>
    </header>

    <div class="tabs">
      <button class="tab active" data-tab="devices">智能设备</button>
      <button class="tab" data-tab="scenes">场景控制</button>
      <button class="tab" data-tab="automation">AI自动化</button>
      <button class="tab" data-tab="ir">红外遥控</button>
    </div>

    <div id="tab-devices" class="tab-content">
      <div class="card">
        <div class="card-header">
          <div class="card-title">设备分类</div>
          <button class="btn-primary">添加设备</button>
        </div>
        
        <div class="section">
          <div class="section-title">照明系统</div>
          <div class="device-grid">
            <div class="device-card active" onclick="toggleDevice(this, 'light')">
              <div class="device-icon">💡</div>
              <div class="device-name">客厅主灯</div>
              <div class="device-status">亮度 80%</div>
            </div>
            <div class="device-card active" onclick="toggleDevice(this, 'light')">
              <div class="device-icon">💡</div>
              <div class="device-name">卧室灯</div>
              <div class="device-status">亮度 50%</div>
            </div>
            <div class="device-card" onclick="toggleDevice(this, 'light')">
              <div class="device-icon">💡</div>
              <div class="device-name">厨房灯</div>
              <div class="device-status">已关闭</div>
            </div>
            <div class="device-card active" onclick="toggleDevice(this, 'light')">
              <div class="device-icon">🌈</div>
              <div class="device-name">氛围灯</div>
              <div class="device-status">RGB模式</div>
            </div>
          </div>
        </div>

        <div class="section">
          <div class="section-title">环境控制</div>
          <div class="device-grid">
            <div class="device-card active" onclick="toggleDevice(this, 'climate')">
              <div class="device-icon">🌡️</div>
              <div class="device-name">智能空调</div>
              <div class="device-status">制冷 24°C</div>
            </div>
            <div class="device-card active" onclick="toggleDevice(this, 'climate')">
              <div class="device-icon">💨</div>
              <div class="device-name">空气净化器</div>
              <div class="device-status">自动模式</div>
            </div>
            <div class="device-card active" onclick="toggleDevice(this, 'climate')">
              <div class="device-icon">💧</div>
              <div class="device-name">智能加湿器</div>
              <div class="device-status">湿度 55%</div>
            </div>
          </div>
        </div>

        <div class="section">
          <div class="section-title">影音娱乐</div>
          <div class="device-grid">
            <div class="device-card" onclick="toggleDevice(this, 'media')">
              <div class="device-icon">📺</div>
              <div class="device-name">智能电视</div>
              <div class="device-status">已关闭</div>
            </div>
            <div class="device-card active" onclick="toggleDevice(this, 'media')">
              <div class="device-icon">🔊</div>
              <div class="device-name">音响系统</div>
              <div class="device-status">播放中</div>
            </div>
            <div class="device-card active" onclick="toggleDevice(this, 'media')">
              <div class="device-icon">🎬</div>
              <div class="device-name">投影仪</div>
              <div class="device-status">影院模式</div>
            </div>
          </div>
        </div>

        <div class="section">
          <div class="section-title">安防监控</div>
          <div class="device-grid">
            <div class="device-card active" onclick="toggleDevice(this, 'security')">
              <div class="device-icon">📷</div>
              <div class="device-name">门口摄像头</div>
              <div class="device-status">录制中</div>
            </div>
            <div class="device-card active" onclick="toggleDevice(this, 'security')">
              <div class="device-icon">🚪</div>
              <div class="device-name">智能门锁</div>
              <div class="device-status">已锁定</div>
            </div>
            <div class="device-card active" onclick="toggleDevice(this, 'security')">
              <div class="device-icon">🔔</div>
              <div class="device-name">智能门铃</div>
              <div class="device-status">在线</div>
            </div>
            <div class="device-card active" onclick="toggleDevice(this, 'security')">
              <div class="device-icon">📡</div>
              <div class="device-name">传感器组</div>
              <div class="device-status">4个在线</div>
            </div>
          </div>
        </div>

        <div class="section">
          <div class="section-title">窗帘窗户</div>
          <div class="device-grid">
            <div class="device-card" onclick="toggleDevice(this, 'curtain')">
              <div class="device-icon">🪟</div>
              <div class="device-name">客厅窗帘</div>
              <div class="device-status">已关闭</div>
            </div>
            <div class="device-card" onclick="toggleDevice(this, 'curtain')">
              <div class="device-icon">🪟</div>
              <div class="device-name">卧室窗帘</div>
              <div class="device-status">已关闭</div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div id="tab-scenes" class="tab-content" style="display: none;">
      <div class="card">
        <div class="card-header">
          <div class="card-title">场景控制</div>
          <button class="btn-primary">创建场景</button>
        </div>
        
        <div class="scene-grid">
          <div class="scene-card active" onclick="activateScene(this, 'home')">
            <div class="scene-icon">🏠</div>
            <div class="scene-name">回家模式</div>
            <div class="scene-description">AI自动识别并激活</div>
          </div>
          <div class="scene-card" onclick="activateScene(this, 'away')">
            <div class="scene-icon">🚪</div>
            <div class="scene-name">离家模式</div>
            <div class="scene-description">全屋智能安防开启</div>
          </div>
          <div class="scene-card" onclick="activateScene(this, 'morning')">
            <div class="scene-icon">🌅</div>
            <div class="scene-name">晨间模式</div>
            <div class="scene-description">自动唤醒系统</div>
          </div>
          <div class="scene-card" onclick="activateScene(this, 'evening')">
            <div class="scene-icon">🌙</div>
            <div class="scene-name">晚间模式</div>
            <div class="scene-description">智能调光与节能</div>
          </div>
          <div class="scene-card" onclick="activateScene(this, 'cinema')">
            <div class="scene-icon">🎬</div>
            <div class="scene-name">影院模式</div>
            <div class="scene-description">沉浸式观影体验</div>
          </div>
          <div class="scene-card" onclick="activateScene(this, 'music')">
            <div class="scene-icon">🎵</div>
            <div class="scene-name">音乐模式</div>
            <div class="scene-description">氛围灯光配合音乐</div>
          </div>
          <div class="scene-card" onclick="activateScene(this, 'reading')">
            <div class="scene-icon">📚</div>
            <div class="scene-name">阅读模式</div>
            <div class="scene-description">舒适阅读光线</div>
          </div>
          <div class="scene-card" onclick="activateScene(this, 'sleep')">
            <div class="scene-icon">😴</div>
            <div class="scene-name">睡眠模式</div>
            <div class="scene-description">智能调光与静音</div>
          </div>
          <div class="scene-card" onclick="activateScene(this, 'party')">
            <div class="scene-icon">🎉</div>
            <div class="scene-name">派对模式</div>
            <div class="scene-description">RGB灯光与音乐同步</div>
          </div>
          <div class="scene-card" onclick="activateScene(this, 'security')">
            <div class="scene-icon">🔒</div>
            <div class="scene-name">安防模式</div>
            <div class="scene-description">全面监控开启</div>
          </div>
        </div>
      </div>
    </div>

    <div id="tab-automation" class="tab-content" style="display: none;">
      <div class="card">
        <div class="card-header">
          <div class="card-title">AI智能自动化</div>
          <button class="btn-primary">添加规则</button>
        </div>

        <div class="section">
          <div class="card" style="margin-bottom: 20px; border-left: 3px solid var(--accent);">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px;">
              <div style="font-weight: 700; font-size: 16px;">人脸识别开灯</div>
              <label class="switch">
                <input type="checkbox" checked>
                <span class="slider"></span>
              </label>
            </div>
            <div style="color: var(--text-secondary); font-size: 14px; margin-bottom: 12px;">
              YOLO视觉系统检测到家庭成员回家时，GLM-4.7 AI自动分析并开启客厅灯光
            </div>
            <div style="display: flex; gap: 10px;">
              <span class="badge success">已启用</span>
              <span class="badge info">触发 23 次</span>
            </div>
          </div>

          <div class="card" style="margin-bottom: 20px; border-left: 3px solid var(--accent);">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px;">
              <div style="font-weight: 700; font-size: 16px;">温度自动调节</div>
              <label class="switch">
                <input type="checkbox" checked>
                <span class="slider"></span>
              </label>
            </div>
            <div style="color: var(--text-secondary); font-size: 14px; margin-bottom: 12px;">
              当室内温度超过28°C时，AI自动控制空调开启制冷模式
            </div>
            <div style="display: flex; gap: 10px;">
              <span class="badge success">已启用</span>
              <span class="badge info">触发 5 次</span>
            </div>
          </div>

          <div class="card" style="margin-bottom: 20px; border-left: 3px solid var(--orange);">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px;">
              <div style="font-weight: 700; font-size: 16px;">夜间自动关灯</div>
              <label class="switch">
                <input type="checkbox">
                <span class="slider"></span>
              </label>
            </div>
            <div style="color: var(--text-secondary); font-size: 14px; margin-bottom: 12px;">
              晚上23:00时，AI自动关闭所有灯光设备
            </div>
            <div style="display: flex; gap: 10px;">
              <span class="badge warning">已禁用</span>
            </div>
          </div>

          <div class="card" style="margin-bottom: 20px; border-left: 3px solid var(--accent);">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px;">
              <div style="font-weight: 700; font-size: 16px;">离家安防开启</div>
              <label class="switch">
                <input type="checkbox" checked>
                <span class="slider"></span>
              </label>
            </div>
            <div style="color: var(--text-secondary); font-size: 14px; margin-bottom: 12px;">
              AI检测到所有人离家时，自动开启全屋安防监控
            </div>
            <div style="display: flex; gap: 10px;">
              <span class="badge success">已启用</span>
              <span class="badge info">触发 8 次</span>
            </div>
          </div>

          <div class="card" style="margin-bottom: 20px; border-left: 3px solid var(--accent);">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px;">
              <div style="font-weight: 700; font-size: 16px;">语音指令响应</div>
              <label class="switch">
                <input type="checkbox" checked>
                <span class="slider"></span>
              </label>
            </div>
            <div style="color: var(--text-secondary); font-size: 14px; margin-bottom: 12px;">
              GLM-4.7语音助手24小时待命，随时响应语音指令
            </div>
            <div style="display: flex; gap: 10px;">
              <span class="badge success">已启用</span>
              <span class="badge info">响应 156 次</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div id="tab-ir" class="tab-content" style="display: none;">
      <div class="card">
        <div class="card-header">
          <div class="card-title">红外遥控中心</div>
          <button class="btn-primary">学习遥控</button>
        </div>

        <div class="section">
          <div class="section-title">电视遥控</div>
          <div class="quick-actions">
            <button class="quick-btn" onclick="sendIRCommand('tv', 'power')">
              <span class="icon">🔴</span>
              电源
            </button>
            <button class="quick-btn" onclick="sendIRCommand('tv', 'volume-up')">
              <span class="icon">🔊</span>
              音量+
            </button>
            <button class="quick-btn" onclick="sendIRCommand('tv', 'volume-down')">
              <span class="icon">🔉</span>
              音量-
            </button>
            <button class="quick-btn" onclick="sendIRCommand('tv', 'channel-up')">
              <span class="icon">➕</span>
              频道+
            </button>
            <button class="quick-btn" onclick="sendIRCommand('tv', 'channel-down')">
              <span class="icon">➖</span>
              频道-
            </button>
            <button class="quick-btn" onclick="sendIRCommand('tv', 'mute')">
              <span class="icon">🔇</span>
              静音
            </button>
            <button class="quick-btn" onclick="sendIRCommand('tv', 'home')">
              <span class="icon">🏠</span>
              主页
            </button>
            <button class="quick-btn" onclick="sendIRCommand('tv', 'back')">
              <span class="icon">⬅️</span>
              返回
            </button>
          </div>
        </div>

        <div class="section">
          <div class="section-title">空调遥控</div>
          <div style="display: flex; gap: 20px; align-items: center; margin-bottom: 24px;">
            <span style="color: var(--text-secondary);">目标温度:</span>
            <input type="range" class="range-slider" min="16" max="30" value="24" id="ac-temp">
            <span id="ac-temp-value" style="font-weight: 700; font-size: 20px; color: var(--primary);">24°C</span>
          </div>
          <div class="quick-actions">
            <button class="quick-btn" onclick="sendIRCommand('ac', 'power')">
              <span class="icon">🔴</span>
              电源
            </button>
            <button class="quick-btn" onclick="sendIRCommand('ac', 'cool')">
              <span class="icon">❄️</span>
              制冷
            </button>
            <button class="quick-btn" onclick="sendIRCommand('ac', 'heat')">
              <span class="icon">🔥</span>
              制热
            </button>
            <button class="quick-btn" onclick="sendIRCommand('ac', 'auto')">
              <span class="icon">🔄</span>
              自动
            </button>
            <button class="quick-btn" onclick="sendIRCommand('ac', 'fan')">
              <span class="icon">💨</span>
              送风
            </button>
            <button class="quick-btn" onclick="sendIRCommand('ac', 'dehumidify')">
              <span class="icon">💧</span>
              除湿
            </button>
            <button class="quick-btn" onclick="sendIRCommand('ac', 'swing')">
              <span class="icon">🌬</span>
              摆风
            </button>
            <button class="quick-btn" onclick="sendIRCommand('ac', 'turbo')">
              <span class="icon">⚡</span>
              强力
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script src="assets/script.js"></script>
  <script>
    document.querySelectorAll('.tab').forEach(tab => {
      tab.addEventListener('click', function() {
        document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
        document.querySelectorAll('.tab-content').forEach(c => c.style.display = 'none');
        
        this.classList.add('active');
        document.getElementById('tab-' + this.dataset.tab).style.display = 'block';
      });
    });

    function toggleDevice(card, type) {
      card.classList.toggle('active');
      const name = card.querySelector('.device-name').textContent;
      const isActive = card.classList.contains('active');
      const statusText = card.querySelector('.device-status');
      
      if (isActive) {
        const activeStatuses = {
          'light': '已开启',
          'climate': '运行中',
          'media': '播放中',
          'security': '在线',
          'curtain': '已开启'
        };
        statusText.textContent = activeStatuses[type] || '已开启';
      } else {
        statusText.textContent = '已关闭';
      }
      
      showNotification(`${name} 已${isActive ? '开启' : '关闭'}`, 'success');
    }

    function activateScene(card, sceneId) {
      document.querySelectorAll('.scene-card').forEach(c => c.classList.remove('active'));
      card.classList.add('active');
      const name = card.querySelector('.scene-name').textContent;
      showNotification(`AI 正在激活 ${name}...`, 'info');
      
      setTimeout(() => {
        showNotification(`${name} 已激活`, 'success');
      }, 1500);
    }

    function sendIRCommand(device, command) {
      const deviceNames = {
        'tv': '电视',
        'ac': '空调'
      };
      showNotification(`已发送 ${deviceNames[device]} ${command} 指令`, 'success');
    }

    function showNotification(message, type = 'info') {
      const notification = document.createElement('div');
      notification.className = `notification ${type}`;
      notification.innerHTML = `
        <span>${type === 'success' ? '✅' : type === 'error' ? '❌' : type === 'warning' ? '⚠️' : '💡'}</span>
        <span>${message}</span>
      `;
      document.body.appendChild(notification);
      
      setTimeout(() => notification.classList.add('show'), 10);
      
      setTimeout(() => {
        notification.classList.remove('show');
        setTimeout(() => notification.remove(), 400);
      }, 3000);
    }

    const acTempSlider = document.getElementById('ac-temp');
    const acTempValue = document.getElementById('ac-temp-value');
    
    if (acTempSlider && acTempValue) {
      acTempSlider.addEventListener('input', function() {
        acTempValue.textContent = this.value + '°C';
      });
    }

    document.querySelectorAll('.device-card').forEach(card => {
      card.addEventListener('mouseenter', function() {
        if (!this.classList.contains('active')) {
          const statusText = this.querySelector('.device-status');
          if (statusText.textContent === '已关闭') {
            statusText.textContent = '点击开启';
          }
        }
      });
      
      card.addEventListener('mouseleave', function() {
        if (!this.classList.contains('active')) {
          this.querySelector('.device-status').textContent = '已关闭';
        }
      });
    });
  </script>
</body>
</html>
